---
title: "Azure Center for SAP Solutions (ACSS) ã‚’ä½¿ã£ã¦ SAP on Azure ã®å±•é–‹"
emoji: "ğŸ“ˆ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Azure","SAP","ACSS"]
published: false
---

Azure Center for SAP Solutions (ACSS) ã¯ã€SAP ã‚·ã‚¹ãƒ†ãƒ ã‚’ Azure ã§å±•é–‹ã™ã‚‹ãŸã‚ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’æä¾›ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚
SAP ã‚·ã‚¹ãƒ†ãƒ ã‚’ãƒãƒãƒ¼ã‚¸ãƒ‰åŒ–ã™ã‚‹ã‚‚ã®ã§ã¯ãªã„ã‚‚ã®ã®ã€SAP ã®ãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã‚’ Azure ã§ç®¡ç†ã—ã‚„ã™ãã™ã‚‹ã“ã¨ã«ç‰¹åŒ–ã—ãŸã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚

* æ–°è¦ä½œæˆæ™‚ã® OS/ãƒ‡ã‚£ã‚¹ã‚¯ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— (OS å†…ã®è¨­å®šã«ã¯ Ansible ã‚’ä½¿ç”¨) 
* SAP ãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã«ç‰¹åŒ–ã—ãŸç®¡ç†ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ã®æä¾›

ã”åˆ©ç”¨ã„ãŸã ãã«å½“ãŸã‚Šã€ã“ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³è‡ªä½“ã®è¿½åŠ è²»ç”¨ã¯æ›ã‹ã‚Šã¾ã›ã‚“ (SLA ã«ã¤ã„ã¦ã‚‚è¨­ã‘ã‚‰ã‚Œã¦ã„ã¾ã›ã‚“)ã€‚
ã¾ãŸã€ç¾æ™‚ç‚¹ã§æ—¥æœ¬å›½å†…ã§ã¯æ±æ—¥æœ¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã§ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚[^1]

æ—¢å­˜ã® SAP on Azure ãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã‚‚ç™»éŒ²ãŒè¡Œãˆã¾ã™ãŒã€ä»Šå›ã¯ä»¥ä¸‹ã®æµã‚Œã§æ–°è¦æ§‹ç¯‰ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

1. ACSS ã®å±•é–‹ã‚’è¡Œã†ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¼ã®æ§‹ç¯‰
2. ACSS ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¼ã®å±•é–‹
3. SAP ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢ã®æº–å‚™
4. SAP ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

# 1. ACSS ã®å±•é–‹ã‚’è¡Œã†ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¼ã®æ§‹ç¯‰

ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ãªã„ã®ã§ã€ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ï¼ã‚’æ§‹ç¯‰ã—ã¦ã„ãã¨ã“ã‚ã¯ã€ <br>
ä»®æƒ³ãƒã‚·ãƒ³ã‚’ç”¨ã„ãŸã‚µãƒ¼ãƒ“ã‚¹ã®æ§‹ç¯‰ã¨å¤‰ã‚ã‚Šã‚ã‚Šã¾ã›ã‚“ã€‚

ã¾ãšã¯ã€ä»®æƒ³ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯/ã‚µãƒ–ãƒãƒƒãƒˆã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚

| ãƒªã‚½ãƒ¼ã‚¹ (ãƒªã‚½ãƒ¼ã‚¹å) | ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ | ã‚¢ãƒ‰ãƒ¬ã‚¹ç©ºé–“ |
| --- | --- | --- |
| VNet (labacssvnet)| East Asia | 10.23.0.0/22 |
| ã‚µãƒ–ãƒãƒƒãƒˆ (app) || 10.23.0.0/24 |
| ã‚µãƒ–ãƒãƒƒãƒˆ (db) || 10.23.1.0/24 |


ã¾ãŸã€å¾Œã« ACSS ã®å±•é–‹ã§ "é«˜å¯ç”¨æ€§ (HA) ã‚’å‚™ãˆãŸåˆ†æ•£" ã‚’é¸æŠã—ã¾ã™ãŒã€å†…éƒ¨ Standard ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ãŒç”¨ã„ã‚‰ã‚Œã¾ã™ã€‚ <br>
å†…éƒ¨ Standard ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã®èƒŒå¾Œã«ã‚ã‚‹ä»®æƒ³ãƒã‚·ãƒ³ã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«å¯¾ã—ã¦å¤–éƒ¨é€šä¿¡ãŒè¡Œãˆãªã„ãŸã‚ã€NAT ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚
æ§‹ç¯‰æ™‚ã«ä¸Šè¨˜ï¼’ã¤ã®ã‚µãƒ–ãƒãƒƒãƒˆã«ç´ã¥ã‘ã¾ã™ã€‚

![alt text](/images/616c8fc8179685/acss1.png)

ã“ã‚Œã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¼ã®æ§‹ç¯‰ãŒå®Œäº†ã§ã™ã€‚<br>
ãã®ä»–ä¸‹è¨˜ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ Azure Firewall ã‚’ç”¨ã„ãŸæ§‹æˆä¾‹ã«ã¤ã„ã¦ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«è¨˜è¼‰ãŒã‚ã‚Šã¾ã™ã®ã§ã€ã”å‚è€ƒãã ã•ã„ã€‚[^2]

# 2. ACSS ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¼ã®å±•é–‹

ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¼ãŒæ§‹ç¯‰ã§ããŸã‚‰ã€ACSS ã®å±•é–‹ã‚’è¡Œã„ã¾ã™ã€‚[^3]

Azure ãƒãƒ¼ã‚¿ãƒ«ã®æ¤œç´¢ãƒãƒ¼ã« "Azure Center for SAP solutions" ã¨å…¥åŠ›ã—ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠã—ã¾ã™ã€‚<br>
æ¬¡ã„ã§ã€"Create a new SAP system" ã‚’é¸æŠã—ã¾ã™ã€‚

![alt text](/images/616c8fc8179685/acss2.png)

ã“ã“ã§å…¥åŠ›ã™ã‚‹ SID (SAP System ID) ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã‚’ä¸€æ„ã«è­˜åˆ¥ã™ã‚‹ãŸã‚ã® ID ã§ã™ã€‚<br>
ãƒ‡ãƒ—ãƒ­ã‚¤ã®ç¨®é¡ã¨ã—ã¦ã€å˜ä¸€ã‚µãƒ¼ãƒãƒ¼ (ASCS ãŠã‚ˆã³ AP / DB ã‚µãƒ¼ãƒãƒ¼ãŒä¸€ç·’) ã‹ã€åˆ†æ•£ (ASCS ãŠã‚ˆã³ AP / DB ã‚µãƒ¼ãƒãƒ¼ãŒåˆ†é›¢),é«˜å¯ç”¨æ€§ (ASCS, AP, DB ã‚µãƒ¼ãƒãƒ¼ãŒãã‚Œãã‚Œè¤‡æ•°å°) ãŒé¸æŠã§ãã¾ã™ã€‚

![alt text](/images/616c8fc8179685/acss3.png)

ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¼ã®æ§‹ç¯‰ã§ä½œæˆã—ãŸä»®æƒ³ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¨ã‚µãƒ–ãƒãƒƒãƒˆã‚’é¸æŠã—ã¾ã™ã€‚

![alt text](/images/616c8fc8179685/acss4.png)

å…¨ã¦ã®ä»®æƒ³ãƒã‚·ãƒ³ã‚ˆã‚Šå‚ç…§ã•ã‚Œã‚‹ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ã—ã¦ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šå„ä»®æƒ³ãƒã‚·ãƒ³ã‹ã‚‰ã¯ Azure Files ãŒ NFS ãƒã‚¦ãƒ³ãƒˆã•ã‚Œå‚ç…§ã•ã‚Œã¾ã™ã€‚

![alt text](/images/616c8fc8179685/acss5.png)

![alt text](/images/616c8fc8179685/acss6.png)

![alt text](/images/616c8fc8179685/acss7.png)

æ¬¡ã«ä»®æƒ³ãƒã‚·ãƒ³ã®æ§‹æˆã‚’è¡Œã„ã¾ã™ã€‚<br>
ä»®æƒ³ãƒã‚·ãƒ³ã‚µã‚¤ã‚ºã«ç”¨ã„ã‚‰ã‚Œã‚‹æŒ‡æ¨™ãŒ SAP ã®ãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã®è©•ä¾¡ã«ç”¨ã„ã‚‰ã‚Œã‚‹ SAPS[^4] ã«ãªã‚Šã¾ã™ã€‚<br>
ã“ã®å€¤ã¨ã€HANA ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ç”¨ã„ã‚‹ãƒ¡ãƒ¢ãƒªã‚µã‚¤ã‚ºã‚’å…¥åŠ›ã—ã€æ¨å¥¨å€¤ã‚’ä½œæˆã‚’é¸æŠã„ãŸã ãã¨ã€è‡ªå‹•çš„ã«ä»®æƒ³ãƒã‚·ãƒ³ã‚µã‚¤ã‚ºã‚’é¸æŠã—ã¦ãã‚Œã¾ã™ã€‚

![alt text](/images/616c8fc8179685/acss8.png)

ã¾ãŸã€HANA ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä»®æƒ³ãƒã‚·ãƒ³ã«ã¤ã„ã¦ã€ãƒ‡ã‚£ã‚¹ã‚¯ãŠã‚ˆã³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’è¨­å®šã§ãã¾ã™ã€‚

![alt text](/images/616c8fc8179685/acss9.png)

![alt text](/images/616c8fc8179685/acss10.png)

æœ€å¾Œã«ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ“ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br>
ç¾æ™‚ç‚¹ã®ã¨ã“ã‚ã€è¿‘æ¥é…ç½®ã‚°ãƒ«ãƒ¼ãƒ—[^5]ã®æ§‹æˆã¯å®Ÿæ–½ã•ã‚Œã¦ã„ãªã„çŠ¶æ³ã«ãªã‚Šã¾ã™ã€‚

![alt text](/images/616c8fc8179685/acss11.png)

ã“ã‚Œã§ä»®æƒ³ãƒã‚·ãƒ³/ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã®å±•é–‹ãŒã§ãã¾ã—ãŸã€‚<br>


ãªãŠã€ä»®æƒ³ãƒã‚·ãƒ³ã§å®Ÿè¡Œã•ã‚ŒãŸè¨­å®š (Ansible ã®å®Ÿè¡Œãƒ­ã‚°) ã¯ã€ACSS ã®å±•é–‹æ™‚ã«ä½œã‚‰ã‚ŒãŸã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ (ãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ— mrg-SID-xxxxxx ã«ä½œæˆ) ã«æ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚

![alt text](/images/616c8fc8179685/acss12.png)

logs-os-configuration-xxxxxx.txt ã«ã¯ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ›´æ–°ã‚„ã€
ã‚«ãƒ¼ãƒãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€swap ã®è¨­å®šãªã© OS ã®è¨­å®šã«é–¢ã™ã‚‹ãƒ­ã‚°ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚

```
=============================================================================== 
roles-os/1.4-packages : 1.4 Packages: - Update OS packages: SLES_SAP-15 - 155.75s
/tmp/82f6e6d3/ansible/roles-os/1.4-packages/tasks/main.yaml:166 ---------------
roles-os/1.1-swap : Swap reboot --------------------------------------- 111.53s
/tmp/82f6e6d3/ansible/roles-os/1.1-swap/tasks/main.yaml:70 --------------------
roles-os/1.9-kernelparameters : 1.9 Kernel parameters - Set relevant kernel parameters -- 27.51s
/tmp/82f6e6d3/ansible/roles-os/1.9-kernelparameters/tasks/main.yaml:72 --------
roles-os/1.16-services : 1.16 - Populate service facts : SLES_SAP-15 ---- 6.46s
/tmp/82f6e6d3/ansible/roles-os/1.16-services/tasks/main.yaml:26 ---------------
roles-os/1.4-packages : 1.4 Packages: - Update OS packages: sles_sap15.4 --- 5.33s
/tmp/82f6e6d3/ansible/roles-os/1.4-packages/tasks/main.yaml:211 ---------------
roles-os/1.4-packages : 1.4 Packages: - Update OS packages: SLES_SAP-15 hana --- 5.21s
/tmp/82f6e6d3/ansible/roles-os/1.4-packages/tasks/main.yaml:258 ---------------
roles-os/1.4-packages : 1.4 Packages - Activate public cloud extension (15) --- 4.32s
/tmp/82f6e6d3/ansible/roles-os/1.4-packages/tasks/main.yaml:87 ----------------
Gathering Facts --------------------------------------------------------- 3.63s
/tmp/82f6e6d3/ansible/playbook_01_os_base_config.yaml:46 ----------------------
roles-os/1.1-swap : 1.1 Swap: - Ensure waagent file is configured with proper parameters --- 3.41s
/tmp/82f6e6d3/ansible/roles-os/1.1-swap/tasks/main.yaml:45 --------------------
roles-os/1.7-chrony : 1.7 chrony: - Collect facts about installed packages --- 2.55s
/tmp/82f6e6d3/ansible/roles-os/1.7-chrony/tasks/main.yml:26 -------------------
roles-os/1.11-accounts : 1.11 Accounts - Create specified admin groups if needed tier: os --- 2.30s
/tmp/82f6e6d3/ansible/roles-os/1.11-accounts/tasks/main.yml:27 ----------------
roles-os/1.16-services : 1.16 - Disable Services : SLES_SAP-15 ---------- 2.01s
/tmp/82f6e6d3/ansible/roles-os/1.16-services/tasks/main.yaml:83 ---------------
roles-os/1.4-packages : 1.4 Packages: - Update OS packages: sles_sap15.4 hana --- 1.82s
/tmp/82f6e6d3/ansible/roles-os/1.4-packages/tasks/main.yaml:304 ---------------
roles-os/1.13-MOTD : 1.13 MOTD: - Update motd banners ------------------- 1.70s
/tmp/82f6e6d3/ansible/roles-os/1.13-MOTD/tasks/main.yaml:43 -------------------
roles-os/1.7-chrony : 1.7 chrony: - Ensure chronyd service is enabled --- 1.43s
/tmp/82f6e6d3/ansible/roles-os/1.7-chrony/tasks/main.yml:187 ------------------
OS configuration playbook: - Ensure jmespath is installed in the playbook python --- 1.36s
/tmp/82f6e6d3/ansible/playbook_01_os_base_config.yaml:14 ----------------------
roles-os/1.3-repository : 1.3 Repository - Check connect to SUSE repos via SUSEConnect --- 1.35s
/tmp/82f6e6d3/ansible/roles-os/1.3-repository/tasks/main.yml:50 ---------------
roles-os/1.13-MOTD : 1.13 MOTD: - Update issue banners ------------------ 1.34s
/tmp/82f6e6d3/ansible/roles-os/1.13-MOTD/tasks/main.yaml:52 -------------------
roles-os/1.13-MOTD : 1.13 MOTD: - Update issue.net banners -------------- 1.32s
/tmp/82f6e6d3/ansible/roles-os/1.13-MOTD/tasks/main.yaml:61 -------------------
Gathering Facts --------------------------------------------------------- 1.27s
/tmp/82f6e6d3/ansible/playbook_01_os_base_config.yaml:7 -----------------------
```

logs-sap-os-configuration-xxxxxx.txt ã«ã¯ã€ãƒ‡ã‚£ã‚¹ã‚¯/ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹æˆã‚„ <br>
å…ˆã®ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã® NFS ãƒã‚¦ãƒ³ãƒˆãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚

```
=============================================================================== 
roles-os/1.4-packages : 1.4 Packages: - Update OS packages: SLES_SAP-15 --- 9.89s
/tmp/3995e180/ansible/roles-os/1.4-packages/tasks/main.yaml:166 ---------------
roles-os/1.5-disk-setup : 1.5 Disk setup - Filesystem creation ---------- 9.51s
/tmp/3995e180/ansible/roles-os/1.5-disk-setup/tasks/main.yml:148 --------------
roles-os/1.5-disk-setup : 1.5 Disk setup - Volume Group creation -------- 5.27s
/tmp/3995e180/ansible/roles-os/1.5-disk-setup/tasks/main.yml:89 ---------------
roles-os/1.4-packages : 1.4 Packages: - Update OS packages: SLES_SAP-15 scs --- 5.10s
/tmp/3995e180/ansible/roles-os/1.4-packages/tasks/main.yaml:258 ---------------
roles-os/1.5-disk-setup : 1.5 Disk setup - Logical Volume creation ------ 4.55s
/tmp/3995e180/ansible/roles-os/1.5-disk-setup/tasks/main.yml:118 --------------
roles-os/1.16-services : 1.16 - Populate service facts : SLES_SAP-15 ---- 3.30s
/tmp/3995e180/ansible/roles-os/1.16-services/tasks/main.yaml:26 ---------------
roles-os/1.9-kernelparameters : 1.9 Kernel parameters - Set relevant kernel parameters --- 3.08s
/tmp/3995e180/ansible/roles-os/1.9-kernelparameters/tasks/main.yaml:72 --------
SAP OS configuration playbook: - Retrieve Subscription ID, Resource Group Name and Virtual Machine name --- 1.97s
/tmp/3995e180/ansible/playbook_02_os_sap_specific_config.yaml:100 -------------
Gathering Facts --------------------------------------------------------- 1.82s
/tmp/3995e180/ansible/playbook_02_os_sap_specific_config.yaml:55 --------------
roles-os/1.4-packages : 1.4 Packages: - Update OS packages: sles_sap15.4 scs --- 1.66s
/tmp/3995e180/ansible/roles-os/1.4-packages/tasks/main.yaml:304 ---------------
roles-sap-os/2.6-sap-mounts : AFS Mount: sapmnt/YO1 HA ------------------ 1.65s
/tmp/3995e180/ansible/roles-sap-os/2.6-sap-mounts/tasks/2.6.0-afs-mounts.yaml:306 
roles-os/1.4-packages : 1.4 Packages: - Update OS packages: sles_sap15.4 --- 1.65s
/tmp/3995e180/ansible/roles-os/1.4-packages/tasks/main.yaml:211 ---------------
roles-sap-os/2.6-sap-mounts : AFS Mount: Create SAP Directories (AFS) --- 1.62s
/tmp/3995e180/ansible/roles-sap-os/2.6-sap-mounts/tasks/2.6.0-afs-mounts.yaml:91 
roles-sap-os/2.5-sap-users : 2.5 SAP Users: - Create SAP Groups --------- 1.60s
/tmp/3995e180/ansible/roles-sap-os/2.5-sap-users/tasks/main.yaml:34 -----------
roles-sap-os/2.6-sap-mounts : AFS Mount: Create SAP Directories (scs & ers) --- 1.57s
/tmp/3995e180/ansible/roles-sap-os/2.6-sap-mounts/tasks/2.6.0-afs-mounts.yaml:206 
roles-sap-os/2.6-sap-mounts : AFS Mount: Delete locally created SAP Directories (sapmnt) --- 1.43s
/tmp/3995e180/ansible/roles-sap-os/2.6-sap-mounts/tasks/2.6.0-afs-mounts.yaml:119 
roles-sap-os/2.4-hosts-file : 2.4 Hosts: - Write unique lines back to /etc/hosts --- 1.34s
/tmp/3995e180/ansible/roles-sap-os/2.4-hosts-file/tasks/main.yaml:161 ---------
roles-sap-os/2.3-sap-exports : 2.3 SAP Exports: - NFS Server Config on Suse (install) --- 1.25s
/tmp/3995e180/ansible/roles-sap-os/2.3-sap-exports/tasks/main.yaml:54 ---------
OS configuration playbook: - Ensure jmespath is installed in the playbook python --- 1.23s
/tmp/3995e180/ansible/playbook_02_os_sap_specific_config.yaml:16 --------------
roles-os/1.3-repository : 1.3 Repository - Check connect to SUSE repos via SUSEConnect --- 1.20s
/tmp/3995e180/ansible/roles-os/1.3-repository/tasks/main.yml:50 ---------------
```

# 3. SAP ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢ã®æº–å‚™

æ¬¡ã« SAP ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢ã®æº–å‚™ã‚’è¡Œã„ã¾ã™ã€‚[^6]

ä¸Šè¨˜ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€Ubuntu ä»®æƒ³ãƒã‚·ãƒ³ã‚’ç«‹ã¦ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ç­‰ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚’è¡Œã£ã¦ã„ã¾ã™ãŒã€<br>
ç’°å¢ƒä½œã‚Œã‚Œã°ã©ã¡ã‚‰ã§ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®é€šã‚Šã§ã™ãŒã€ï¼’ç‚¹æ³¨æ„ãŒã‚ã‚Šã¾ã™ã€‚<br>
ï¼‘ã¤ç›®ã¯ã€```ansible-core``` ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯å¾Œç¶šã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«å¤±æ•—ã™ã‚‹ãŸã‚ã€<br>
ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æŒ‡å®šã¯ã›ãšã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã™ã€‚
(æ¨™æº–å‡ºåŠ›ã®çµæœãªã©ã¯å‰²æ„›)

```bash
azureuser@installer:~$ curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash
azureuser@installer:~$ az login
azureuser@installer:~$ sudo apt install python3-pip
azureuser@installer:~$ sudo pip3 install ansible-core
azureuser@installer:~$ sudo ansible-galaxy collection install ansible.netcommon:==5.0.0 -p /opt/ansible/collections
azureuser@installer:~$ sudo ansible-galaxy collection install ansible.posix:==1.5.1 -p /opt/ansible/collections
azureuser@installer:~$ sudo ansible-galaxy collection install ansible.utils:==2.9.0 -p /opt/ansible/collections
azureuser@installer:~$ sudo ansible-galaxy collection install ansible.windows:==1.13.0 -p /opt/ansible/collections
azureuser@installer:~$ sudo ansible-galaxy collection install community.general:==6.4.0 -p /opt/ansible/collections

azureuser@installer:~$ git clone https://github.com/Azure/SAP-automation-samples.git
azureuser@installer:~$ git clone https://github.com/Azure/sap-automation.git
```

ã‚‚ã†ï¼‘ã¤ã¯ã€BOM (éƒ¨å“è¡¨) åãŒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è¨˜è¼‰ã‚ˆã‚Šæ›´æ–°ã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€<br>
SAP-automation-samples[^7] ã‚’å‚ç…§ã—ã¦äºˆã‚ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ (ä¸‹è¨˜ä¾‹ã§ã¯ã€```S4HANA_2021_ISS_v0003ms```)ã€‚<br>

```bash
azureuser@installer:~$ cd sap-automation/
azureuser@installer:~/sap-automation$ export bom_base_name="S4HANA_2021_ISS_v0003ms"
azureuser@installer:~/sap-automation$ export s_user="<S ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ>"
azureuser@installer:~/sap-automation$ export s_password='<S ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰'
azureuser@installer:~/sap-automation$ export storage_account_access_key="<ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼>"
azureuser@installer:~/sap-automation$ export sapbits_location_base_path="https://<ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå>.blob.core.windows.net/sapbits"
azureuser@installer:~/sap-automation$ export BOM_directory="/home/azureuser/SAP-automation-samples/SAP"
azureuser@installer:~/sap-automation$ export orchestration_ansible_user="azureuser"
azureuser@installer:~/sap-automation$ export playbook_path="/home/azureuser/sap-automation/deploy/ansible/playbook_bom_downloader.yaml"
azureuser@installer:~/sap-automation$ sudo ansible-playbook ${playbook_path} -e "bom_base_name=${bom_base_name}" -e "deployer_kv_name=dummy_value" -e "s_user=${s_user}" -e "s_password=${s_password}" -e "sapbits_access_key=${storage_account_access_key}" -e "sapbits_location_base_path=${sapbits_location_base_path}" -e "BOM_directory=${BOM_directory}" -e "orchestration_ansible_user=${orchestration_ansible_user}"

â€¦ (çœç•¥)...


PLAY RECAP ****************************************************************************************************************************
localhost                  : ok=674  changed=25   unreachable=0    failed=0    skipped=2238 rescued=0    ignored=4   

azureuser@installer:~$ 
```

ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã« ```archives``` ã«ã¯ SAP ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚µã‚¤ãƒˆã‚ˆã‚Šå–å¾—ã—ãŸã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ•ã‚¡ã‚¤ãƒ«ç­‰ãŒæ ¼ç´ã•ã‚Œã€<br>
```boms``` é…ä¸‹ã«ã¯ã€[SAP-automation-samples](https://github.com/Azure/SAP-automation-samples.git) ã‚ˆã‚Šå–å¾—ã—ãŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒæ ¼ç´ã•ã‚Œã¾ã™ã€‚<br>

![alt text](/images/616c8fc8179685/acss13.png)

![alt text](/images/616c8fc8179685/acss14.png)

![alt text](/images/616c8fc8179685/acss15.png)

# ã¾ã¨ã‚

Azure Center for SAP Solutions (ACSS) ã‚’ç”¨ã„ãŸ SAP on Azure ã®å±•é–‹ã«ã¤ã„ã¦ã€ä»¥ä¸‹ã®ç‚¹ã‚’ã”ç´¹ä»‹ã—ã¦ã¿ã¾ã—ãŸã€‚

1. ACSS ã®å±•é–‹ã‚’è¡Œã†ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¼ã®æ§‹ç¯‰
2. ACSS ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¼ã®å±•é–‹
3. SAP ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢ã®æº–å‚™

æ¬¡å›ã€"4. SAP ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" ã‚’ç¢ºèªã—ã¦ã„ãã¾ã™ã€‚

[^1]: [Azure Center for SAP solutions ã«é–¢ã™ã‚‹ä¸€èˆ¬çš„ãªè³ªå•](https://learn.microsoft.com/ja-jp/azure/sap/center-sap-solutions/faq#-----------------------)
[^2]: [ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆã®ä¾‹ - ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã®ãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ã«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’æº–å‚™ã™ã‚‹](https://learn.microsoft.com/ja-jp/azure/sap/center-sap-solutions/prepare-network#example-network-configuration)
[^3]: [Azure Center for SAP solutions ã‚’ä½¿ç”¨ã—ãŸ S/4HANA ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã®ãƒ‡ãƒ—ãƒ­ã‚¤](https://learn.microsoft.com/ja-jp/azure/sap/center-sap-solutions/deploy-s4hana)
[^4]: [SAPS - SAP Benchmark](https://www.sap.com/about/benchmark/measuring.html)
[^5]: [è¿‘æ¥é…ç½®ã‚°ãƒ«ãƒ¼ãƒ—](https://learn.microsoft.com/ja-jp/azure/sap/workloads/proximity-placement-scenarios)
[^6]: [SAP HANA ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://learn.microsoft.com/ja-jp/azure/sap/center-sap-solutions/download-sap-hana-installation-media)
[^7]: [SAP-automation-samples](https://github.com/Azure/SAP-automation-samples.git)