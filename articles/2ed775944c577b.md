---
title: "Azure Maps ã§ã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—"
emoji: "ğŸ—ºï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Azure", "Azure Maps", "Tellus", "Open Data"]
published: false
---

ã“ã®è¨˜äº‹ã¯ã€[Microsoft Azure Tech Advent Calender 2024](https://qiita.com/advent-calendar/2024/microsoft-azure-tech) ã® 12/21 ã®è¨˜äº‹ã§ã™ã€‚

~~å˜ã«è¡›æ˜Ÿç”»åƒåˆ†æã«èˆˆå‘³ãŒã‚ã£ã¦ã€èˆˆå‘³æœ¬ä½ã§ã‚„ã£ã¦ã„ã‚‹ã¨ã„ã†ã ã‘ãªã®ã§ã™ãŒ~~ æ¯å¹´ã“ã®å¹´å§‹ã®æ™‚æœŸã«è¿‘ã¥ã„ã¦ã„ã‚‹ãã‚‹ã¨ã€å®¶æ—ã§å‡ºã‹ã‘ã‚‹ã“ã¨ãŒå¢—ãˆãŸã‚Šã€å­ã©ã‚‚ã¯ã‚µãƒ³ã‚¿ã‚¯ãƒ­ãƒ¼ã‚¹ã®è¿½è·¡ã—ã¦ã„ãŸã‚Š (?)ã€
åœ°å›³ã‚’é–‹ãæ©Ÿä¼šãŒå¢—ãˆã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚

ä»Šå›ã¯ã€åœ°ç†ç©ºé–“æƒ…å ±ã‚’æ‰±ã† geopandas ãªã© Python ã®åœ°ç†ç©ºé–“æƒ…å ±å‡¦ç†ãƒ©ã‚¤ãƒ–ãƒ©ã‚¤ã‚’ä½¿ã£ã¦ã¿ã‚‹ã“ã¨ã¨ã€Azure Maps ã¨ã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦ã€ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—ã‚’ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

# ãƒ‡ãƒ¼ã‚¿

åœ°å›³ã§æ‰±ã†ãƒ‡ãƒ¼ã‚¿ã¯ã€åœ°ç†ç©ºé–“æƒ…å ±ã¨å‘¼ã°ã‚Œã€çµŒåº¦ã€ç·¯åº¦ã¨ã„ã£ãŸä½ç½®ã‚’ç¤ºã™æƒ…å ± (ä½ç½®æƒ…å ±) ã¨ã€
é–¢é€£ã™ã‚‹æƒ…å ±ã‚’å«ã‚€ãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚

ãƒ‡ãƒ¼ã‚¿ã«ã¯å¤§ããï¼’ç¨®é¡ã‚ã‚Šã¾ã™ã€‚

| ç‰¹å¾´ | ãƒ©ã‚¹ã‚¿ãƒ¼å½¢å¼ | ãƒ™ã‚¯ã‚¿ãƒ¼å½¢å¼ |
| --- | --- |---|
| ãƒ‡ãƒ¼ã‚¿ã®ç¨®é¡ | ç”»åƒãƒ‡ãƒ¼ã‚¿ | ãƒãƒªã‚´ãƒ³ã€ãƒ©ã‚¤ãƒ³ã€ãƒã‚¤ãƒ³ãƒˆ |
| ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚º | å¤§ãã„ | å°ã•ã„ |
| åˆ©ç”¨ä¾‹ | è¡›æ˜Ÿç”»åƒã€èˆªç©ºå†™çœŸ | åœ°å›³ãƒ‡ãƒ¼ã‚¿ (é“è·¯ã€å¢ƒç•Œç·š) |
| è§£åƒåº¦ | å›ºå®š | å¯å¤‰ |
| ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ | GeoTIFF | GeoJSON, Shapefile |

ä»Šå›ã¯ã€TIFF å½¢å¼ã®ãƒ©ã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’æ¬§å·å®‡å®™æ©Ÿé–¢ (ESA) ãŒæä¾›ã™ã‚‹ Sentinel Hub EO Browser ã‚ˆã‚Šå–å¾—ã—ã¾ã™ã€‚ã“ã¡ã‚‰ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¯ã€æ§˜ã€…ãªè¡›æ˜Ÿãƒ‡ãƒ¼ã‚¿ã‚’ç„¡æ–™ã«ã¦å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã¾ãŸã€ãƒ™ã‚¯ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ã€ä½ã‚“ã§ã„ã‚‹åœŸåœ°ã®å…¬åœ’ãƒ‡ãƒ¼ã‚¿ã‚’ [éŒå€‰ãªã³ãƒãƒƒãƒ—](https://navimap.kcn-net.org/data.html) ã‚ˆã‚Šå–å¾—ã—ã¦ã„ã¾ã™ã€‚

![Sentinel Hub EO Browser ã®æ“ä½œ](/images/2ed775944c577b/image.png)

# Azure Maps ã¨ã¯

Azure Maps ã¯ã€Microsoft Azure ã®ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ™ãƒ¼ã‚¹ã®åœ°ç†ç©ºé–“ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚åœ°å›³ã®è¡¨ç¤ºã€ãƒ«ãƒ¼ãƒˆæ¤œç´¢ã€ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€ãƒªãƒãƒ¼ã‚¹ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯æƒ…å ±ã€åœ°å›³ã®ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®šã€åœ°å›³ã®ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ãªã©ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚

ä¸»ãªæ©Ÿèƒ½ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

- åœ°å›³ã®è¡¨ç¤º
- ãƒ«ãƒ¼ãƒˆæ¤œç´¢
- ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° / é€†ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
- ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯æƒ…å ±
- åœ°å›³ã®ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®š
- åœ°å›³ã®ãƒ‡ãƒ¼ã‚¿ã®å–å¾—
- å¤©æ°—æƒ…å ±ã®å–å¾—

# ç’°å¢ƒæ§‹ç¯‰

ã“ã¡ã‚‰ã®ç’°å¢ƒã‚’ç”¨æ„ã—ã¾ã™ã€‚

- [Azure Machine Learning ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹](https://learn.microsoft.com/ja-jp/azure/machine-learning/tutorial-azure-ml-in-a-day?view=azureml-api-2)
- [Azure ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ](https://learn.microsoft.com/ja-jp/azure/storage/blobs/storage-quickstart-blobs-portal)
  - ã‚³ãƒ³ãƒ†ãƒŠãƒ¼åã¯ ```data``` ã¨ã—ã¦ã„ã¾ã™ã€‚
- [Azure Maps ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ](https://learn.microsoft.com/ja-jp/azure/azure-maps/quick-demo-map-app#create-an-azure-maps-account)

## å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã€æ•´å½¢ã‚’è¡Œã†ãŸã‚ã€å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
Azure Machine Learning ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã¯ã€Conda ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€
ä»¥ä¸‹ã® Conda ç’°å¢ƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’è¡Œã„ã€æ¬¡ã„ã§ãã®ç’°å¢ƒã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã—ã€Python ã‚«ãƒ¼ãƒãƒ«ã‚’ç™»éŒ²ã—ã¾ã™ã€‚

æ—©é€Ÿã€Azure Machine Learning ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«æ¥ç¶šã—ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ãã¾ã™ã€‚

![ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã](/images/2ed775944c577b/image-1.png)

Conda ç’°å¢ƒãƒ•ã‚¡ã‚¤ãƒ«ã¯ã“ã¡ã‚‰ã€‚

```yaml
name: geolab-env
channels:
  - conda-forge
dependencies:
  - geospatial
  - pip
  - azure-storage-blob
  - pip:
    - ipykernel
    - matplotlib
```

ä¸Šè¨˜ç’°å¢ƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨ã„ã¦ã€ç’°å¢ƒã‚’ä½œæˆã—ã¾ã™ã€‚

```bash
(azureml_py38) azureuser@geolabcomp:~/cloudfiles/code/Users/yuri.ohno$ conda env list
# conda environments:
#
base                     /anaconda
azureml_py310_sdkv2      /anaconda/envs/azureml_py310_sdkv2
azureml_py38          *  /anaconda/envs/azureml_py38
azureml_py38_PT_TF       /anaconda/envs/azureml_py38_PT_TF
jupyter_env              /anaconda/envs/jupyter_env
mount_env                /anaconda/envs/mount_env

(azureml_py38) azureuser@geolabcomp:~/cloudfiles/code/Users/yuri.ohno$ conda env create -f environment.yml

...(çœç•¥)...

done
#
# To activate this environment, use
#
#     $ conda activate geolab-env
#
# To deactivate an active environment, use
#
#     $ conda deactivate
```

```bash
(azureml_py38) azureuser@geolabcomp:~/cloudfiles/code/Users/yuri.ohno$ conda activate geolab-env
(geolab-env) azureuser@geolabcomp:~/cloudfiles/code/Users/yuri.ohno$ python -m ipykernel install --user --name geolab-env --display-name "GeoLab Env"
Installed kernelspec geolab-env in /home/azureuser/.local/share/jupyter/kernels/geolab-env
```

ã¯ã„ã€ã“ã‚Œã§æº–å‚™ãŒæ•´ã„ã¾ã—ãŸã€‚

# ãƒ‡ãƒ¼ã‚¿ã®å–å¾—

äºˆã‚å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ (Blob ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸) ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚
ãã®ãƒ‡ãƒ¼ã‚¿ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å–å¾—ã—ã¾ã™ã€‚

```python
import requests
import aiohttp
import geopandas as gpd
from IPython.display import Image, display
from azure.storage.blob import BlobServiceClient, BlobClient, ContainerClient
import matplotlib.pyplot as plt
from rasterio.plot import show

# Blob ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

# Azure Blob Storageã®æ¥ç¶šæƒ…å ±
connect_str = "<your_connection_string>"
container_name = "data"
blob1 = "park.geojson"
blob2 = "2024-12-12-00_00_2024-12-12-23_59_Landsat_8-9_L2_True_color.tiff"

def get_blob(conn, containername, blobname):
    blob_service_client = BlobServiceClient.from_connection_string(conn)
    container_client = blob_service_client.get_container_client(containername)
    blob_client = container_client.get_blob_client(blobname)
    blob_data = blob_client.download_blob().readall()

    with open(blobname, "wb") as f:
     f.write(blob_data)

get_blob(connect_str, container_name, blob1)
get_blob(connect_str, container_name, blob2)
```

# è¡›æ˜Ÿç”»åƒä¸Šã«å…¬åœ’ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º

å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’åœ°å›³ä¸Šã«è¡¨ç¤ºã—ã¾ã™ã€‚

```python
tif_data = rasterio.open("2024-12-12-00_00_2024-12-12-23_59_Landsat_8-9_L2_True_color.tiff")
geojson_data = gpd.read_file("park.geojson")

fig, ax = plt.subplots()
geojson_data.plot(ax=ax, color='orangered')
show(tif_data, ax=ax)
```

![è¡›æ˜Ÿç”»åƒã« Point ã‚’è¡¨ç¤º](/images/2ed775944c577b/image-2.png)

# ã„ã‚ˆã„ã‚ˆ Azure Maps ã‚’ä½¿ã£ã¦ã¿ã‚‹

Azure Maps ã‚’ä½¿ã£ã¦ã€åœ°å›³ä¸Šã«ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã¦ã¿ã¾ã™ã€‚
ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¨ã¨ã—ã¦ã¯ã€åŒ—éŒå€‰é§…ã‹ã‚‰æœ€ã‚‚è¿‘ã„å…¬åœ’ã‚’æ¢ã—ã€ãã®ãƒ«ãƒ¼ãƒˆã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

```python
maps_key = "<your_azure_maps_key>"
current_location = [35.336999, 139.544814]

geojson_data = gpd.read_file("park.geojson")

session = aiohttp.ClientSession()

async def get_route(session, origin, destination):
    """
    Azure Maps ã‚ˆã‚Šãƒ«ãƒ¼ãƒˆã®å–å¾— 
    """

    url = "https://atlas.microsoft.com/route/directions/json"
    params = {
        "subscription-key": maps_key,
        "api-version": "1.0",
        "query": f"{origin[0]},{origin[1]}:{destination[0]},{destination[1]}"
    }

    response = await session.get(url, params=params)
    if response.status != 200:
        raise Exception("API call with status code {response.status}")
    data = await response.json()

    return data

async def show_route_image(session,center,pin,path):
    """
    Azure Maps ã‚ˆã‚Šãƒ«ãƒ¼ãƒˆã€å§‹ç‚¹ã€çµ‚ç‚¹ã‚’è¡¨ç¤ºã—ãŸç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
    """
    
    url = "https://atlas.microsoft.com/map/static/png"
    params = {
        "subscription-key": maps_key,
        "api-version": "1.0",
        "center": f"{center[1]},{center[0]}",
        "pins": pin,
        "path": path
    }

    response = await session.get(url, params=params)
    if response.status != 200:
        raise Exception("API call with status code {response.status}")
    data = await response.content.read()
    display(Image(data))
    

def format_pin(origin,destination):
    """
    Azure Maps ã«ã¦é™æ­¢ç”»åƒã«è¡¨ç¤ºã™ã‚‹ãƒ”ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’æ•´å½¢
    https://learn.microsoft.com/ja-jp/rest/api/maps/render/get-map-static-image?view=rest-maps-2024-04-01&tabs=HTTP#uri-parameters
    """
    return "default|cofa8072||{} {}|{} {}".format(origin[1],origin[0],destination[1],destination[0])

def format_path(route):
    """
    Azure Maps ã«ã¦é™æ­¢ç”»åƒã«è¡¨ç¤ºã™ã‚‹ãƒ‘ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚’æ•´å½¢
    https://learn.microsoft.com/ja-jp/rest/api/maps/render/get-map-static-image?view=rest-maps-2024-04-01&tabs=HTTP#uri-parameters
    """
    path=[]
    for i in range(len(route["routes"][0]["legs"][0]["points"])):
        location = list(route["routes"][0]["legs"][0]["points"][i].values())
        location[0], location[1] = location[1], location[0]
        path.append(location)
    
    formattedpath = ('|'.join(map(str,path))).replace('[','').replace(']','').replace(',','')
    return "lc0f6dd9|lw6||{}".format(formattedpath)

nearest_point = None
nearest_route = None
min_distance = float("inf")

for i, feature in geojson_data.iterrows():
    point = (feature["geometry"].y, feature["geometry"].x) # [lon,lat] -> (lat,lon)
    route = await get_route(session, current_location, point)
    distance = route["routes"][0]["summary"]["lengthInMeters"]
    if distance < min_distance:
        min_distance = distance
        nearest_point = point
        nearest_route = route
    if i == 3:
        break

await show_route_image(session,current_location,format_pin(current_location,nearest_point),format_path(nearest_route))
```

![å…¬åœ’ã¾ã§ã®ãƒ«ãƒ¼ãƒˆã‚’è¡¨ç¤º](/images/2ed775944c577b/image-3.png)

ãŠãŠã£ã€åŒ—éŒå€‰é§…ã‹ã‚‰æœ€å¯„ã‚Šã®å…¬åœ’ã¾ã§ã®çµŒè·¯ãŒå–ã‚Œã¾ã—ãŸã€‚

ãªãŠã€å–å¾—ã—ãŸ GeoJSON ãƒ‡ãƒ¼ã‚¿ã«å«ã¾ã‚Œã‚‹å…¬åœ’ãƒ‡ãƒ¼ã‚¿ã¯ã€281 ä»¶ã¨å¤šã„ãŸã‚ã€æœ€åˆã® 4 ä»¶ã®ã¿ã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚
ã¾ãŸã€ä¸Šè¨˜ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦ï¼’ç‚¹è£œè¶³ã—ã¾ã™ã€‚

ï¼‘ã¤ã¯ã€[Azure Maps Route - Get Route Directions](https://learn.microsoft.com/ja-jp/rest/api/maps/route/get-route-directions?view=rest-maps-2024-04-01&tabs=HTTP#successfully-retrieve-a-route-between-an-origin-and-a-destination) ã®å¿œç­”ã¨ã—ã¦ã€ãƒ«ãƒ¼ãƒˆã®è·é›¢ (```lengthInMeters```) ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’åˆ©ç”¨ã—ã¦ã€æœ€ã‚‚è¿‘ã„å…¬åœ’ã‚’æ¢ã—ã¦ã„ã¾ã™ã€‚
ï¼’ç‚¹ç›®ã¯ã€é™æ­¢ç”»åƒã‚’å–å¾—ã™ã‚‹ [Azure Maps Render - Get Map Static Image](https://learn.microsoft.com/ja-jp/rest/api/maps/render/get-map-static-image?view=rest-maps-2024-04-01&tabs=HTTPs) ã¯ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ã€ä¸­å¿ƒåº§æ¨™ã® ```center``` ã€ã‚‚ã—ãã¯å¢ƒç•Œã‚’ç¤ºã™ ```bbox``` ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æŒ‡å®šãŒå¿…é ˆã¨ãªã‚Šã¾ã™ã€‚

# ã‚ˆã‚Šç™ºå±•çš„ãªä¾‹

ä»Šå›ã¯ã€geopandas ã‚„ rasterio ã¨ã„ã£ãŸåœ°ç†ç©ºé–“æƒ…å ±ã‚’æ‰±ã† Python ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ã¦ã¿ã¾ã—ãŸã€‚
ã•ã‚‰ã« Azure Maps ã‚’ä½¿ã£ã¦ã€åœ°å›³ä¸Šã«ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹ä¾‹ã‚’ç¤ºã—ã¾ã—ãŸã€‚

ã‚‚ã†ä¸€æ­©è¸ã¿è¾¼ã‚“ã è§£æã¨ã—ã¦ã¯ã€è¡›æ˜Ÿç”»åƒãƒ‡ãƒ¼ã‚¿ã‹ã‚‰åœ°ç‰©ã®æ¤œå‡ºã‚„åˆ†é¡ã‚’è¡Œã†ã“ã¨ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚
ãã®ä¸€ä¾‹ã§ãƒ©ã‚¹ã‚¿ãƒ¼ç”»åƒã‹ã‚‰ãƒ—ãƒ¼ãƒ«ã‚’æ¤œå‡ºã•ã›ã‚‹ä¾‹ãŒã“ã¡ã‚‰ã«ã‚ã‚Šã¾ã™ã®ã§ã€å‚è€ƒã«ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

- [Azure Synapse Analytics ã‚’ä½¿ç”¨ã—ã¦å®‡å®™é£›è¡Œãƒ‡ãƒ¼ã‚¿ã‚’è§£æã™ã‚‹](https://learn.microsoft.com/ja-jp/azure/architecture/industries/aerospace/geospatial-processing-analytics)

# å‚è€ƒ

* [GISã¨ã¯... - å›½åœŸåœ°ç†é™¢](https://www.gsi.go.jp/GIS/whatisgis.html)